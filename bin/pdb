#!/usr/bin/env ruby

$LOAD_PATH << File.expand_path("../../lib", __FILE__)

require 'awesome_print'
require 'hieracles/puppetdb'

client = Hieracles::Puppetdb::Client.new(
  {
    :server => 'http://puppetdb.sd2.0x35.net:8080'
  }
)

node = 'mose.dev.bi1.0x35.net'

response = client.request("nodes", [:'=', ['fact', 'fqdn'], node])

ap response.data
